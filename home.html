<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Instagram</title>
    <link rel="icon" href="assets\instagram.png" type="image/png" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
    <link rel="stylesheet" href="navbar.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="home.css">

    <style>
        .search-modal {
    display: none;
    position: fixed;
    left: 66px;
    top: 0;
    width: 397px;
    height: 100vh;
    background-color: #000;
    z-index: 1000;
    border-right: 1px solid #262626;
}
@media (max-width: 768px) {
    .sidebar {
        display: none;
    }

    .mobile-nav {
        display: block;
        position: fixed;
        max-width: 100vw;

    }
    

}

.search-modal-content {
    padding: 24px 24px 0;
}

.search-header {
    margin-bottom: 24px;
}

.search-header h2 {
    font-size: 24px;
    font-weight: 600;
    margin-bottom: 24px;
    color: #fff;
}

.searchbox {
    position: relative;
    margin-bottom: 24px;
}

.search-input {
    width: 100%;
    padding: 12px 16px;
    background-color: #262626;
    border: none;
    border-radius: 8px;
    color: #fff;
    font-size: 16px;
}

.search-input:focus {
    outline: none;
}

.recent-searches {
    padding: 12px 0;
}

.recent-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 16px;
    margin-bottom: 12px;
}

.recent-header h3 {
    font-size: 16px;
    font-weight: 600;
    color: #fff;
}

.clear-all {
    color: #0095f6;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    opacity: 0.9;
    transition: opacity 0.2s;
}

.clear-all:hover {
    color: #fff;
}

.recent-search-item {
    transition: background-color 0.2s;
}

.recent-search-item:hover {
    background-color: #262626;
}

.recent-search-item .remove-search {
    opacity: 0;
    transition: opacity 0.2s;
}

.recent-search-item:hover .remove-search {
    opacity: 1;
}

.remove-search:hover {
    color: #fff !important;
}

.search-overlay {
    display: none;
    position: fixed;
    top: 0;
    left: 470px;
    right: 0;
    bottom: 0;
    background-color: rgba(0, 0, 0, 0.5);
    z-index: 999;
}
.loader {
    width: 40px;
    height: 40px;
    border: 4px solid #f3f3f3;
    border-top: 4px solid #3498db;
    border-radius: 50%;
    animation: spin 1s linear infinite;
    margin: 20px auto;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}
@media (max-width: 768px){
    .search-modal{
        display: none;
    }
}
    </style>
</head>
<body>
    <div class="container">
        <div class="sidebar">
            <a href="index.html">
                <img src="assets\logo.svg" alt="Instagram Logo" width="150" />
            </a>
            <a href="home.html">
                <img src="assets\icons\home.svg" alt="Home" width="24" height="24"/>
                Home
            </a>
            <a href="#" id="searchBtn">
                <img src="assets\icons\search.svg" alt="Search" width="24" height="24"/>
                Search
            </a>
            <a href="explore.html">
                <img src="assets\icons\compass.svg" alt="Explore" width="24" height="24"/>
                Explore
            </a>
            <a href="reels.html">
                <img src="assets\icons\reels.svg" alt="Reels" width="24" height="24"/>
                Reels
            </a>
            <a href="messeges.html">
                <img src="assets\icons\messenger.svg" alt="Messages" width="24" height="24"/>
                Messages
            </a>
            <a href="notification.html">
                <img src="assets/icons/heart.svg" alt="Notifications" width="24" height="24"/>
                Notifications
            </a>
            <a href="create.html">
                <img src="assets\icons\add.svg" alt="Create" width="24" height="24"/>
                Create
            </a>
            <a href="profile.html">
                <img src="assets\my.pfp.jpg" alt="Profile" width="24" height="24"/>
                Profile       
            </a>
            <a href="settings.html">
                <img src="assets\icons\more.svg" alt="More" width="24" height="24"/>
                More
            </a>
        </div>
        <div class="search-modal" id="searchModal">
            <div class="search-modal-content">
                <div class="search-header">
                    <h2>Search</h2>
                    <div class="searchbox">
                        <input type="text" class="search-input" placeholder="Search" />
                        
                    </div>
                </div>
                <div class="recent-searches">
                    <div class="recent-header">
                        <h3>Recent</h3>
                        <span class="clear-all">Clear all</span>
                    </div>
                    
                </div>
            </div>
            <div class="search-overlay" id="searchOverlay"></div>
        </div>
        <div class="main-content">
            <div class="top-bar">
                <div class="logo">
                    <img src="assets/logo.svg" alt="Instagram Logo" width="120" />
                </div>
                <div class="top-right">
                    <input type="text" class="search-box" placeholder="Search" />

                    <a href="notification.html" class="notification-icon" style="margin-top: 10px;">
                        <img src="assets/icons/heart.svg" alt="Notifications" width="27" height="25" />
                    </a>
                    
                </div>
            </div>
            <nav class="mobile-nav">
                <div class="mobile-nav-items">
                    <a href="home.html"><img src="assets/icons/home.svg" alt="Home" width="24" height="24"></a>
                    <a href="explore.html"><img src="assets/icons/compass.svg" alt="Explore" width="24" height="24"></a>
                    <a href="reels.html"><img src="assets/icons/reels.svg" alt="Reels" width="24" height="24"></a>
                    <a href="create.html"><img src="assets/icons/add.svg" alt="Create" width="24" height="24"></a>
                    <a href="messeges.html"><img src="assets/icons/messenger.svg" alt="Messages" width="24" height="24"></a>
                    <a href="profile.html"><img src="assets/my.pfp.jpg" alt="Notifications" width="24" height="24"></a>
                </div>
            </nav>

            <div class="story-bar">
                <div class="story">
                    <div class="story-avatar">
                        <img src="assets\pfp\s5.jpg" alt="Story 1" />
                    </div>
                    <span>sigma_12</span>
                </div>
                <div class="story">
                    <div class="story-avatar">
                        <img src="assets\pfp\5.jpg" alt="Story 12" />
                    </div>
                    <span>end.this_pls</span>
                </div>
                <div class="story">
                    <div class="story-avatar">
                        <img src="assets\pfp\18.jpg" alt="Story 12" />
                    </div>
                    <span>siuuuuuee</span>
                </div>
                <div class="story">
                    <div class="story-avatar">
                        <img src="assets\pfp\16.jpg" alt="Story 12" />
                    </div>
                    <span>vyrat_kohli</span>
                </div>
                <div class="story">
                    <div class="story-avatar">
                        <img src="assets\pfp\14.jpg" alt="Story 2" />
                    </div>
                    <span>h1tl3r_og</span>
                </div>
                <div class="story">
                    <div class="story-avatar">
                        <img src="assets\pfp\6.jpg" alt="Story 3" />
                    </div>
                    <span>Skeebeedee</span>
                </div>
                <div class="story">
                    <div class="story-avatar">
                        <img src="assets\pfp\10.jpg" alt="Story 4" />
                    </div>
                    <span>king_von</span>
                </div>
                <div class="story">
                    <div class="story-avatar">
                        <img src="assets\pfp\12.jpg" alt="Story 5" />
                    </div>
                    <span>gyaat_less</span>
                </div>
                <div class="story">
                    <div class="story-avatar">
                        <img src="assets\pfp\3.jpg" alt="Story 6" />
                    </div>
                    <span>pls_die</span>
                </div>
                <div class="story">
                    <div class="story-avatar">
                        <img src="assets\pfp\17.jpg" alt="Story 7" />
                    </div>
                    <span>w45h</span>
                </div>
                <div class="story">
                    <div class="story-avatar">
                        <img src="assets\pfp\1.jpg" alt="Story 8" />
                    </div>
                    <span>joe_mama</span>
                </div>
                <div class="story">
                    <div class="story-avatar">
                        <img src="assets\pfp\15.jpg" alt="Story 9" />
                    </div>
                    <span>hampter</span>
                </div>
                <div class="story">
                    <div class="story-avatar">
                        <img src="assets\pfp\2.jpg" alt="Story 11" />
                    </div>
                    <span>memememe</span>
                </div>
                <div class="story">
                    <div class="story-avatar">
                        <img src="assets\pfp\s4.jpg" alt="Story 12" />
                    </div>
                    <span>howto_101</span>
                </div>
                <div class="story">
                    <div class="story-avatar">
                        <img src="assets\pfp\18.jpg" alt="Story 12" />
                    </div>
                    <span>padh.le.bhai</span>
                </div>
                <div class="story">
                    <div class="story-avatar">
                        <img src="assets\pfp\4.jpg" alt="Story 12" />
                    </div>
                    <span>post.malone</span>
                </div>
                <div class="story">
                    <div class="story-avatar">
                        <img src="assets\pfp\s3.jpg" alt="Story 12" />
                    </div>
                    <span>imma_cry</span>
                </div>
                
            </div>
        <div class="suggestions">
            <div class="suggestion">
                <img src="assets\my.pfp.jpg" alt="Suggested user" />
                <div class="contain">
                    <div class="username">prakhar_1803_</div><a href="#" class="switch">Switch</a>
                    <div class="userr">Prakhar</div>
                </div>
                
                
            </div>
            <h2>Suggested for you <a href="#" class="see">See All</a></h2>
            <div class="suggestion">
                <img src="assets\pfp\s5.jpg" alt="Suggested user" />
                <div class="username">high</div>
                <a href="#" class="follow">Follow</a>
            </div>
            <div class="suggestion">
                <img src="assets\pfp\s2.jpg" alt="Suggested user" />
                <div class="username">higher</div>
                <a href="#" class="follow">Follow</a>
            </div>
            <div class="suggestion">
                <img src="assets\pfp\s3.jpg" alt="Suggested user" />
                <div class="username">highest</div>
                <a href="#" class="follow">Follow</a>
            </div>
            <div class="suggestion">
                <img src="assets\pfp\s1.jpg" alt="Suggested user" />
                <div class="username">highest+1</div>
                <a href="#" class="follow">Follow</a>
            </div>
            
            <div class="footer">
                About · Help · Press · API · Jobs · Privacy · Terms<br>
                © 2024 INSTAGRAM FROM META
            </div>
        </div>

        <nav class="mobile-nav">
            <div class="mobile-nav-items">
                <a href="home.html"><img src="assets/icons/home.svg" alt="Home" width="24" height="24"></a>
                <a href="explore.html"><img src="assets/icons/compass.svg" alt="Explore" width="24" height="24"></a>
                <a href="reels.html"><img src="assets/icons/reels.svg" alt="Reels" width="24" height="24"></a>
                <a href="create.html"><img src="assets/icons/add.svg" alt="Create" width="24" height="24"></a>
                <a href="messeges.html"><img src="assets/icons/messenger.svg" alt="Messages" width="24" height="24"></a>
                <a href="profile.html"><img src="assets/my.pfp.jpg" alt="Notifications" width="24" height="24"></a>
            </div>
        </nav>
    </div>
    <script>
const usernames = [
    "Whiskers", "Mittens", "Shadow", "Tiger", "Simba", "Luna", "Garfield", "Smokey",
                "Cleo", "Felix", "Leo", "Milo", "Bella", "Nala", "Salem", "Oreo", "Jasper",
                "Socks", "Pumpkin", "Oliver", "Marshmallow", "Snowball", "Pepper", "Cinnamon",
                "Fluffy", "Mochi", "Toffee", "Paws", "Cookie", "Midnight", "Ash", "Boots",
                "Daisy", "Hazel", "Gizmo", "Coco", "Chloe", "Ziggy", "Toby", "Maggie",
                "Oscar", "Loki", "Biscuit", "Peanut", "Dusty", "Ace", "Sassy", "Lucky",
                "Bandit", "Poppy", "Pixie", "Jinx", "Nova", "Lily", "Cupcake", "Finn",
                "Waffles", "Sunny", "Mocha", "Raven", "Smudge", "Casper", "Pearl", "Amber",
                "Blue", "Ruby", "Caramel", "Muffin", "Sushi", "Bubbles", "Pumpkin", "Jade"
];

const descriptions = [
    "Car go Meow 🗣️🗣️🗣️",
        "When in doubt, give up",
        "Moshi Moshi",
        "Give up on your dreams and die",
        "well hello there little one",
        "May the force be with you",
        "weeeeeeeeeeeeeeee","ゲキをたびる","Day 192","yeah you go be delulu","noot noot","Sure, here is the information about your mom....",
        "Follow For More","Trust me you ain't it chief","Domain expansion: Infinite swamp","go back to sleep bye","hehe","what if we were two cats?",
        "amen","Busy days-","Random as usual","Nothing is real","WE ARE TRAPPED","Send help pls",
        "the eyes tony,they never lie","may your delulu become trulu","+1000 Aura","Breaking news: You are Gay","Pls go home no one wants you","THEY ARE COMING","OFF WITH THEIR HEAD","NOBODY IS REAL ANYWAYS",
];

const likedByUsers = [
    "Whiskers", "Tigger", "Ginger", "Misty", "Shadow", "Marbles", "Cuddles",
"Snowflake", "Tinkerbell", "Boo", "Pumpkin", "Mittens", "Socks", "Peaches",
"Sprinkles", "Buttercup", "BooBoo", "Marmalade", "Snickers", "Pebbles",
"Honey", "Jellybean", "Fudge", "Taffy", "Twix", "Buttons", "Velvet", "Lemon",
"Cloud", "Stormy", "Rascal", "Basil", "Clover", "Pudding", "Coconut", "Pixie",
"Snuggles", "Tootsie", "Freckles", "Piper", "Dusty", "Bingo", "Mango", "Misty",
"Opal", "Taco", "Binky", "Dottie", "Taco", "Sage", "Maple", "Nutmeg",
"Cinnamon", "Gingersnap", "Minnie", "Frosty", "Benny", "Toby", "Skittles",
"Goose", "Pumpkin", "Sprout", "Nacho", "Sandy", "Pancake", "Mimosa",
"Cinnamon", "Chip", "Scout", "Doodle", "Goofy", "Pumpkin", "Bear", "Snickers",
"Misty", "Pancake", "Figaro", "Truffles", "Mischief", "Baxter", "Mistletoe",
"Shadow", "Pluto", "Slinky", "Jupiter", "Fudge", "Mallow", "Stella",
"Pogo", "Echo", "Trixie", "Hershey", "Sunny", "Tornado", "Cinnamon",
"Raisin", "Poppy", "Lulu", "Momo", "Cheddar", "Cherry", "Kiki", "Pineapple"
];



function getRandomTime() {
    const times = ['just now', '1m', '5m', '10m', '30m', '1h', '2h', '3h', '5h', '8h', '12h', '1d'];
    return times[Math.floor(Math.random() * times.length)];
}

function getRandomFromArray(array) {
    return array[Math.floor(Math.random() * array.length)];
}

function generatePostHeader() {
    const username = getRandomFromArray(usernames);
    return `
        <div class="post-header">
            <img src="assets/pfp/${Math.floor(Math.random() * 17) + 1}.jpg" alt="User profile" />
            <div class="username">${username}</div>
            <div class="time">${getRandomTime()}</div>
        </div>
    `;
}
function generatePostActions() {
    return `
        <div class="post-actions">
            <i class="far fa-heart heart-icon"></i>
            <i class="far fa-comment"></i>
            <i class="far fa-paper-plane"></i>
            <i class="far fa-bookmark"></i>
        </div>
    `;
}

function generatePostDetails() {
    const likedBy = getRandomFromArray(likedByUsers);
    const likeCount = Math.floor(Math.random() * 10000) + 100;
    const commentCount = Math.floor(Math.random() * 100) + 1;
    const description = getRandomFromArray(descriptions);

    return `
        <div class="post-details">
            <p class="likes">Liked by <strong>${likedBy}</strong> and <strong class="like-count">${likeCount}</strong> others</p>
            <p class="description">
                <strong>${getRandomFromArray(usernames)}</strong> ${description}
            </p>
            <p class="view-comments">View all ${commentCount} comments</p>
        </div>
    `;
}

function generateComments() {
    return `
        <div class="new-comment">
            <input type="text" placeholder="Add a comment..." />
        </div>
    `;
}

function generateCarousel() {
    const postNumber = Math.floor(Math.random() * 38) + 1;
    const numImages = Math.floor(Math.random() * 4) + 1; 
    const images = Array.from({ length: numImages }, (_, i) => ({
        src: `assets/posts/${postNumber + i}.jpg`,
        isActive: i === 0
    }));
    if (numImages===1) {
        return  `
        <div class="carousel">
            <div class="carousel-container">
                ${images.map(img => `
                    <div class="carousel-item ${img.isActive ? 'active' : ''}">
                        <img src="${img.src}" alt="Post content" loading="lazy" />
                    </div>
                `).join('')}
            </div>
                ${images.map((_, i) => `
                    <span class="carousel-dot ${i === 0 ? 'active' : ''}" data-index="${i}"></span>
                `).join('')}
            </div>
        </div>
    `
    } else { return `
        <div class="carousel">
            <div class="carousel-container">
                ${images.map(img => `
                    <div class="carousel-item ${img.isActive ? 'active' : ''}">
                        <img src="${img.src}" alt="Post content" loading="lazy" />
                    </div>
                `).join('')}
            </div>
            <div class="carousel-nav">
                <button class="carousel-prev">❮</button>
                <button class="carousel-next">❯</button>
            </div>
            <div class="carousel-dots">
                ${images.map((_, i) => `
                    <span class="carousel-dot ${i === 0 ? 'active' : ''}" data-index="${i}"></span>
                `).join('')}
            </div>
        </div>
    `;}
}


document.addEventListener('DOMContentLoaded', () => {
    document.querySelectorAll('.post-media').forEach(video => {
        let loopCount = 0; 
        const maxLoops = 3; 

        video.addEventListener('ended', () => {
            loopCount++;
            if (loopCount < maxLoops) {
                video.currentTime = 0; 
                video.play(); 
            }
        });

        video.play();
    });
});
function generatePost() {
    const isVideo = Math.random() > 0.8;
    const mediaContent = isVideo 
        ? `<video class="post-media" controls autoplay muted >
             <source src="assets/reels/video${Math.floor(Math.random() * 24) + 1}.mp4" type="video/mp4">
           </video>` 
        : generateCarousel();

    return `
        <div class="post">
            ${generatePostHeader()}
            ${mediaContent}
            ${generatePostActions()}
            ${generatePostDetails()}
            ${generateComments()}
        </div>
    `;
}
document.addEventListener('DOMContentLoaded', () => {
    initEnhancedFeed();
});
function initEnhancedFeed() {
    const mainContent = document.querySelector('.main-content');
    for (let i = 0; i < 5; i++) {
        mainContent.insertAdjacentHTML('beforeend', generatePost());
    }
    initCarousels();
    initInfiniteScroll();
}
let touchStartX = 0;
let touchEndX = 0;

document.addEventListener('touchstart', (e) => {
    touchStartX = e.touches[0].clientX;
});

document.addEventListener('touchend', (e) => {
    touchEndX = e.changedTouches[0].clientX;
    handleSwipe();
});

function handleSwipe() {
    const diff = touchStartX - touchEndX;

    if (Math.abs(diff) > 50) {
        const direction = diff > 0 ? 'next' : 'prev';
        const activeCarousel = document.querySelector('.carousel-container.active');
        if (activeCarousel) {
            navigateCarousel(activeCarousel.closest('.carousel'), direction);
        }
    }
}

function navigateCarousel(carousel, direction) {
    const container = carousel.querySelector('.carousel-container');
    const items = carousel.querySelectorAll('.carousel-item');
    const dots = carousel.querySelectorAll('.carousel-dot');
    let currentIndex = Array.from(items).findIndex((item) =>
        item.classList.contains('active')
    );

    if (direction === 'prev' && currentIndex > 0) {
        currentIndex--;
    } else if (direction === 'next' && currentIndex < items.length - 1) {
        currentIndex++;
    }

    updateCarousel(container, items, dots, currentIndex);
}

function updateCarousel(container, items, dots, index) {
    items.forEach((item, i) => {
        item.classList.toggle('active', i === index);
    });
    dots.forEach((dot, i) => {
        dot.classList.toggle('active', i === index);
    });
    container.style.transform = `translateX(-${index * 100}%)`;
}

function initCarousels() {
    document.querySelectorAll('.carousel').forEach(carousel => {
        const container = carousel.querySelector('.carousel-container');
        const items = carousel.querySelectorAll('.carousel-item');
        const dots = carousel.querySelectorAll('.carousel-dot');
        const prevBtn = carousel.querySelector('.carousel-prev');
        const nextBtn = carousel.querySelector('.carousel-next');
        let currentIndex = 0;
        function updateCarousel(index) {
            items.forEach((item, i) => {
                item.classList.toggle('active', i === index);
            });
            dots.forEach((dot, i) => {
                dot.classList.toggle('active', i === index);
            });
            container.style.transform = `translateX(-${index * 100}%)`;
        }
        function navigateCarousel(direction) {
            if (direction === 'prev' && currentIndex > 0) {
                currentIndex--;
            } else if (direction === 'next' && currentIndex < items.length - 1) {
                currentIndex++;
            }
            updateCarousel(currentIndex);
        }
        prevBtn?.addEventListener('click', () => navigateCarousel('prev'));
        nextBtn?.addEventListener('click', () => navigateCarousel('next'));
        dots.forEach((dot, index) => {
            dot.addEventListener('click', () => {
                currentIndex = index;
                updateCarousel(currentIndex);
            });
        });
        updateCarousel(currentIndex);
    });
}


function initInfiniteScroll() {
    let isLoading = false;

    window.addEventListener('scroll', () => {
        if ((window.innerHeight + window.scrollY) >= document.body.offsetHeight - 1000 && !isLoading) {
            isLoading = true;
            loadMorePosts();
            setTimeout(() => isLoading = false, 1000);
        }
    });
}
function loadMorePosts() {
    const mainContent = document.querySelector('.main-content');
    const loader = document.createElement('div');
    loader.className = 'loader';
    mainContent.appendChild(loader);

    setTimeout(() => {
        loader.remove();
        for (let i = 0; i < 3; i++) {
            mainContent.insertAdjacentHTML('beforeend', generatePost());
        }
        initCarousels();
    }, 1000);
}
    </script>
    <script src="nav.js"></script>
</body>  
</html>
